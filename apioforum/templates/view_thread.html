{% from 'common.html' import disp_post,tag %}
{% extends 'base.html' %}
{% block header %}
<h1>{%block title %}{{thread.title}}{% endblock %}</h1>
{% endblock %}

{%block content%}
<div class="thread-top-bar">
    <span class="thread-top-bar-a">
        {% if g.user == thread.creator %}
        <a class="actionbutton" href="{{url_for('thread.config_thread',thread_id=thread.id)}}">configure thread</a>
        {% endif %}
    </span>
    &nbsp;
    <span class="thread-top-bar-b">
        {% for the_tag in tags %}
            {{ tag(the_tag) }}
        {% endfor %}
    </span>
</div>

<div class="posts">
    {% for post in posts %}
    {% call disp_post(post, True) %}
        {{ rendered_posts[loop.index0] | safe}}
    {% endcall %}
    {% endfor %}
</div>
{% if g.user %}
<form class="new-post" action="{{url_for('thread.create_post',thread_id=thread.id)}}" method="POST">
    <textarea class="new-post-box" placeholder="your post here..." name="content"></textarea>
    <input type="submit" value="yes">
</form>
{% else %}
<p>please log in to reply to this thread</p>
{% endif %}
{% endblock %}
