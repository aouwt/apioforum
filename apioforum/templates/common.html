{% macro disp_post(post, buttons=False) %}
<div class="post">
    <div class="post-heading">
        <span class="post-heading-a">
            <span class="post-heading-em">{{post.author}}</span> {{ts(post.created)}}
            {% if post.edited %}
                (edited {{ts(post.updated)}})
            {% endif %}
        </span>
        <span class="post-heading-b">
        {% if buttons and post.author == g.user %}
            <a class="actionbutton"
               href="{{url_for('thread.edit_post',post_id=post.id)}}">edit</a>
            <a class="actionbutton"
               href="{{url_for('thread.delete_post',post_id=post.id)}}">delete</a>
        {% endif %}
        #{{post.id}}
        </span>
    </div>
    <div class="post-content">
        {{ caller() }}
    </div>
</div>
{% endmacro %}

{% macro ts(dt) -%}
<time title="{{dt.isoformat(' ')}}" datetime="{{dt.isoformat(' ')}}">{{dt | fuzzy}}</time>
{%- endmacro %}
