{% extends 'base.html' %}
{% from 'common.html' import ts, tag %}
{% block header %}<h1>{% block title %}apioforum{%endblock%}</h1>{%endblock%}
{%block nmcontent%}
<main class="widemain">
<p>welcome to the apioforum</p>
<p>forum rules: do not be a bad person. do not do bad things.</p>
{% if g.user %}
<p><a class="actionbutton" href="{{url_for('forum.create_thread')}}">create new thread</a></p>
{% else %}
<p>please log in to create a new thread</p>
{% endif %}
<div class="threadlistings">
<div class="threadlisting">
    <div class="threadlisting-part threadlisting-part-title threadlisting-header">
        name
    </div>
    <div class="threadlisting-part threadlisting-part-tags threadlisting-header">
        tags
    </div>
    <div class="threadlisting-part threadlisting-part-creator threadlisting-header">
        creator
    </div>
    <div class="threadlisting-part threadlisting-part-created threadlisting-header">
        created
    </div>
    <div class="threadlisting-part threadlisting-part-updated threadlisting-header">
        last updated
    </div>
    <div class="threadlisting-part threadlisting-part-lastactivityby threadlisting-header">
        last activity by
    </div>
    <div class="threadlisting-part threadlisting-part-numreplies threadlisting-header">
        posts
    </div>
</div>
{%for thread in threads%}
<div class="threadlisting">
    <div class="threadlisting-part threadlisting-part-title"><a href="{{url_for('thread.view_thread',thread_id=thread.id)}}">{{thread.title}}</a></div>
    <div class="threadlisting-part threadlisting-part-tags">
        {% for the_tag in thread_tags[thread.id] %}
            {{tag(the_tag)}}
        {% endfor %}
    </div>
    <div class="threadlisting-part threadlisting-part-creator">{{thread.creator}}</div>
    <div class="threadlisting-part threadlisting-part-created">{{ts(thread.created)}}</div>
    <div class="threadlisting-part threadlisting-part-updated">{{ts(thread.updated)}}</div>
    <div class="threadlisting-part threadlisting-part-lastactivityby">{{thread.last_user}}</div>
    <div class="threadlisting-part threadlisting-part-numreplies">{{thread.num_replies}}</div>
</div>
{%endfor%}
</div>
</main>
{%endblock%}
